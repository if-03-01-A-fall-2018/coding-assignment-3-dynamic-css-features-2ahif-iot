<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/nouislider.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.3.0/Chart.bundle.js"></script>
    <script src="../js/nouislider.min.js"></script>
    <script src="../js/data-grabber.js" type="text/javascript"></script>
    <title>IoT: Heating stats</title>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-success">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand text-light active" href="../index.html">Internet of Things</a>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link text-light" href="general.html">General information</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="usage.html">Usage</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="positive.html">Positive aspects</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="negative.html">Negative aspects</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="dashbutton.html">Dash Button</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="discussion.html">Discussion</a>
            </li>
        </ul>
    </div>
</nav>
<article>
    <h1>Heating stats</h1>
    <p>Live data requested from a heating system in Abtenau, Austria.</p>

    <table>
        <thead>
        <tr>
            <th colspan="2">Temperatures</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>Outside temp.</td>
            <td id="outside-temp">Loading...</td>
        </tr>

        <tr>
            <td>Heating flow</td>
            <td id="heating-flow">Loading...</td>
        </tr>

        <tr>
            <td>Return flow</td>
            <td id="return-flow">Loading...</td>
        </tr>

        <tr>
            <td>Return flow (set)</td>
            <td id="return-flow-set">Loading...</td>
        </tr>

        <tr>
            <td>Warm water</td>
            <td id="warm-water">Loading...</td>
        </tr>

        <tr>
            <td>Evaporator</td>
            <td id="evaporator">Loading...</td>
        </tr>

        <tr>
            <td>Condenser</td>
            <td id="condenser">Loading...</td>
        </tr>
        </tbody>
    </table>

    <table>
        <thead>
        <tr>
            <th colspan="2">Settings</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>Mode</td>
            <td id="mode">Loading...</td>
        </tr>

        <tr>
            <td>CPU boot date</td>
            <td id="cpu-date">Loading...</td>
        </tr>

        <tr>
            <td>CPU boot time</td>
            <td id="cpu-time">Loading...</td>
        </tr>

        <tr>
            <td>Heating: Increase off</td>
            <td id="ht-inc-off">Loading...</td>
        </tr>

        <tr>
            <td>Heating: Increase on</td>
            <td id="ht-inc-on">Loading...</td>
        </tr>

        <tr>
            <td>Heating hysteresis</td>
            <td id="ht-hyst">Loading...</td>
        </tr>

        <tr>
            <td>Compr. working hours</td>
            <td id="compr-hours">Loading...</td>
        </tr>
        </tbody>
    </table>

    <p style="margin-top: 1em">
        <b>Data requested at: </b> <span id="last-request">(no request sent yet)</span>
        <br>
        The displayed data refreshes every minute.
        Data source: <a href="https://www.wallinger-online.at/heating">wallinger-online.at/heating</a>
    </p>
    <div id="slider" type="range">

    </div>
  <canvas id="tempChart"></canvas>
  <script>
  var slider = document.getElementById('slider');

noUiSlider.create(slider, {
    start: [20, 80],
    connect: true,
    range: {
        'min': 0,
        'max': 100
    }
});

  var ctx = document.getElementById("tempChart").getContext("2d");
  window.randomScalingFactor = function() {
  		return Math.round(Samples.utils.rand(-100, 100));
  	};
    window.chartColors = {
	red: 'rgb(255, 99, 132)',
	orange: 'rgb(255, 159, 64)',
	yellow: 'rgb(255, 205, 86)',
	green: 'rgb(75, 192, 192)',
	blue: 'rgb(54, 162, 235)',
	purple: 'rgb(153, 102, 255)',
	grey: 'rgb(201, 203, 207)'
};


new Chart(ctx, {
  type: 'line',
  data: {
    labels: [1500,1600,1700,1750,1800,1850,1900,1950,1999,2050],
    datasets: [{
        data: [ 4.7, 4.8, 4.9, 5.0, 5.1, 5.2, 5.1, 5.0, 4.9, 4.8, 4.9, 4.8, 4.7, 4.6, 4.5 ],
        label: "Außen",
        borderColor: "#3e95cd",
        fill: false
      }, {
        data: [ 28.3, 26.8, 26.4, 26.3, 26.1, 30.8, 31.1, 31.2, 32.0, 32.7, 33.1, 33.3 ],
        label: "Vorlauf",
        borderColor: "#8e5ea2",
        fill: false
      }, {
        data: [ 26.2, 25.9, 25.8, 25.9, 26.6, 27.1, 27.5, 27.7, 27.8, 27.5, 27.9, 28.1 ],
        label: "Rücklauf",
        borderColor: "#3cba9f",
        fill: false
      }, {
        data: [ 47.7, 47.8, 47.7, 47.8, 47.7, 47.6, 47.7, 47.5, 47.6, 47.8, 47.9, 47.8 ],
        label: "Warmwasser",
        borderColor: "#e8c3b9",
        fill: false
      }
    ]
  },
  options: {
    title: {
      display: true,
      text: 'Temperaturverlauf'
    }
  }
});
  </script>
</article>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
</body>
</html>
